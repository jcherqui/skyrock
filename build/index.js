#!/usr/bin/env node
'use strict';require('babel-polyfill');var _co=require('co');var _co2=_interopRequireDefault(_co);var _config=require('config');var _config2=_interopRequireDefault(_config);var _radio=require('./radio');var _radio2=_interopRequireDefault(_radio);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var run=regeneratorRuntime.mark(function run(){var radioSkyrock,radioMetal,titleRadioSkyrock;return regeneratorRuntime.wrap(function run$(_context){while(1){switch(_context.prev=_context.next){case 0:radioSkyrock=new _radio2.default(_config2.default.skyrock_url);radioMetal=new _radio2.default(_config2.default.radiometal_url);_context.next=4;return radioSkyrock.listen();case 4:if(!true){_context.next=19;break;}_context.next=7;return radioSkyrock.title();case 7:titleRadioSkyrock=_context.sent;console.log({titleRadioSkyrock:titleRadioSkyrock});// LISTEN RADIO METAL
if(!(radioSkyrock.state==='open'&&!titleRadioSkyrock.match(new RegExp(_config2.default.emission)))){_context.next=13;break;}radioSkyrock.close();_context.next=13;return radioMetal.listen();case 13:if(!(radioSkyrock.state==='close'&&titleRadioSkyrock.match(new RegExp(_config2.default.emission)))){_context.next=17;break;}radioMetal.close();_context.next=17;return radioSkyrock.listen();case 17:_context.next=4;break;case 19:case'end':return _context.stop();}}},run,this);});(0,_co2.default)(run());